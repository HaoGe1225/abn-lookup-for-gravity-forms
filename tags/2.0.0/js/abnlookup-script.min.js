function itsg_gf_abnlookup_function(e,i,a){var s=gf_abnlookup_settings.ajax_url,n=gf_abnlookup_settings.validation_message_loading,o=gf_abnlookup_settings.validation_message_not_valid,t=gf_abnlookup_settings.validation_message_error_communicating,l=gf_abnlookup_settings.validation_message_11_char,r=gf_abnlookup_settings.text_checking,d=gf_abnlookup_settings.text_check_abn,_=gf_abnlookup_settings.gst_value_yes,p=gf_abnlookup_settings.gst_value_no,u=gf_abnlookup_settings.lookup_timeout,g=gf_abnlookup_settings.lookup_retries;!function(i){"use strict";var a=!1,c=jQuery(".gform_abnlookup_field_"+e+' input[type="text"]'),y=jQuery(".gform_abnlookup_field_"+e+" .gfield_description.validation_message"),h=jQuery(".itsg_abnlookup_response_"+e),f=jQuery(".itsg_abnlookup_checkabn_"+e),v=jQuery(".gform_abnlookup_entity_gst_field_"+e),m=jQuery(".gform_abnlookup_entity_gst_field_"+e+' input[value="'+_+'"]'),b=jQuery(".gform_abnlookup_entity_gst_field_"+e+' input[value="'+p+'"]'),k=jQuery(".gform_abnlookup_entity_type_field_"+e),C=jQuery(".gform_abnlookup_entity_type_field_"+e+" input"),j=jQuery(".gform_abnlookup_entity_status_field_"+e),Q=jQuery(".gform_abnlookup_entity_status_field_"+e+" input"),x=jQuery(".gform_abnlookup_entity_name_field_"+e),E=jQuery(".gform_abnlookup_entity_name_field_"+e+" input"),N=jQuery(".gform_abnlookup_entity_postcode_field_"+e),w=jQuery(".gform_abnlookup_entity_postcode_field_"+e+" input"),A=jQuery(".gform_abnlookup_entity_state_field_"+e),S=jQuery(".gform_abnlookup_entity_state_field_"+e+" input"),D=jQuery(".gform_abnlookup_entity_effective_from_field_"+e),T=jQuery(".gform_abnlookup_entity_effective_from_field_"+e+" input"),F=jQuery(".gform_abnlookup_gst_effective_from_field_"+e),O=jQuery(".gform_abnlookup_gst_effective_from_field_"+e+" input"),B=jQuery(".gform_abnlookup_business_name_field_"+e),P=jQuery(".gform_abnlookup_business_name_field_"+e+" select"),G=jQuery(".gform_abnlookup_business_name_field_"+e+" option");""!==h.html()?((m.is(":visible")&&1!=m.prop("checked")&&1!=b.prop("checked")||C.is(":visible")&&""==C.val()||Q.is(":visible")&&""==Q.val()||E.is(":visible")&&""==E.val()||w.is(":visible")&&""==w.val()||S.is(":visible")&&""==S.val()||T.is(":visible")&&""==T.val()||P.is(":visible")&&""==P.val()||O.is(":visible")&&""==O.val())&&c.trigger("change"),m.is(":checked")?b.prop("disabled",!0):b.is(":checked")&&m.prop("disabled",!0),C.prop("readonly",!0),Q.prop("readonly",!0),E.prop("readonly",!0),w.prop("readonly",!0),S.prop("readonly",!0),T.prop("readonly",!0),O.prop("readonly",!0)):(v.closest("li.gfield").hide(),k.closest("li.gfield").hide(),j.closest("li.gfield").hide(),x.closest("li.gfield").hide(),N.closest("li.gfield").hide(),A.closest("li.gfield").hide(),D.closest("li.gfield").hide(),F.closest("li.gfield").hide(),B.closest("li.gfield").hide()),c.unbind("change").change((function(){var e=jQuery(this).val().replace(/\D/g,"");if(11==e.length){var _={action:"itsg_gf_abnlookup_check_ajax",abn:e};a&&4!==a.readyState&&a.abort(),a=function(e){return i.ajax({type:"POST",url:s,data:e,tryCount:0,retryLimit:g,beforeSend:function(){y.hide(),h.html(n),f.val(r+" ... "),h.addClass("loading"),h.removeClass("error Active Cancelled validation_message")},success:function(e){if(void 0!==e)try{f.val(d);var i=JSON.parse(e);if(null!=i.exception)y.hide(),"Search text is not a valid ABN or ACN"==i.exception.exceptionDescription?h.html(o):h.text(i.exception.exceptionDescription),h.removeClass("Active Cancelled loading"),h.addClass("error validation_message"),v.hide(),k.hide(),j.hide(),x.hide(),N.hide(),A.hide(),D.hide(),F.hide(),B.hide(),C.val("").change(),Q.val("").change(),E.val("").change(),w.val("").change(),S.val("").change(),T.val("").change(),O.val("").change(),G.remove(),m.prop("disabled",!1),b.prop("disabled",!1),m.prop("checked",!1).change().keyup(),b.prop("checked",!1).change().keyup(),C.prop("readonly",!1),Q.prop("readonly",!1),E.prop("readonly",!1),w.prop("readonly",!1),S.prop("readonly",!1),T.prop("readonly",!1),O.prop("readonly",!1);else if(null!=i.businessEntity202001){var a=i.businessEntity202001.entityType.entityTypeCode,s=i.businessEntity202001.entityType.entityDescription,n=i.businessEntity202001.entityStatus.entityStatusCode,t=i.businessEntity202001.mainBusinessPhysicalAddress.postcode,l=i.businessEntity202001.mainBusinessPhysicalAddress.stateCode,r=i.businessEntity202001.entityStatus.effectiveFrom,_=i.businessEntity202001.businessName,p=("0"+(L=new Date(r)).getDate()).slice(-2),u=("0"+(L.getMonth()+1)).slice(-2),g=L.getFullYear();if(T.hasClass("dmy"))var c=p+"/"+u+"/"+g;else T.hasClass("dmy_dash")?c=p+"-"+u+"-"+g:T.hasClass("dmy_dot")?c=p+"."+u+"."+g:T.hasClass("ymd_slash")?c=g+"/"+u+"/"+L:T.hasClass("ymd_dash")?(c=g+"-"+u+"-"+L,businessEntity202001):c=T.hasClass("ymd_dot")?g+"."+u+"."+L:u+"/"+p+"/"+g;if(null!=i.businessEntity202001.goodsAndServicesTax){var L,M=i.businessEntity202001.goodsAndServicesTax.effectiveFrom;if(p=("0"+(L=new Date(M)).getDate()).slice(-2),u=("0"+(L.getMonth()+1)).slice(-2),g=L.getFullYear(),T.hasClass("dmy"))var Y=p+"/"+u+"/"+g;else Y=O.hasClass("dmy_dash")?p+"-"+u+"-"+g:O.hasClass("dmy_dot")?p+"."+u+"."+g:O.hasClass("ymd_slash")?g+"/"+u+"/"+L:O.hasClass("ymd_dash")?g+"-"+u+"-"+L:O.hasClass("ymd_dot")?g+"."+u+"."+L:u+"/"+p+"/"+g;O.val(Y).change(),O.prop("readonly",!0),F.show()}else F.hide(),O.val("").change();if("IND"==a)var I=("string"==typeof i.businessEntity202001.legalName.familyName?i.businessEntity202001.legalName.familyName:"")+", "+("string"==typeof i.businessEntity202001.legalName.givenName?i.businessEntity202001.legalName.givenName:"")+" "+("string"==typeof i.businessEntity202001.legalName.otherGivenName?i.businessEntity202001.legalName.otherGivenName:"");else I=i.businessEntity202001.mainName.organisationName;if(void 0!==_){G.remove();var J=new Option(I,I,!0,!0);P.append(J),_.forEach((function(e,i,a){var s=new Option(e.organisationName,e.organisationName,!1,!1);P.append(s)}))}else G.remove(),J=new Option(I,I,!0,!0),P.append(J);y.hide(),h.text(n+" - "+I),C.val(s).change(),C.prop("readonly",!0),Q.val(n).change(),Q.prop("readonly",!0),E.val(I).change(),E.prop("readonly",!0),w.val(t).change(),w.prop("readonly",!0),S.val(l).change(),S.prop("readonly",!0),T.val(c).change(),T.prop("readonly",!0),h.removeClass("error loading validation_message"),h.addClass(n),null!=i.businessEntity202001.goodsAndServicesTax&&"0001-01-01"==i.businessEntity202001.goodsAndServicesTax.effectiveTo?(m.prop("checked",!0).click().change().keyup(),m.prop("disabled",!1),b.prop("disabled",!0)):(b.prop("checked",!0).click().change().keyup(),b.prop("disabled",!1),m.prop("disabled",!0)),v.show(),k.show(),x.show(),j.show(),N.show(),A.show(),D.show(),B.show()}}catch(e){h.text(e),h.removeClass("loading Active Cancelled"),h.addClass("error validation_message")}},error:function(e,a,s){if("timeout"==a){if(this.tryCount++,this.tryCount<=this.retryLimit)return void i.ajax(this);h.text(t)}else h.text(e.responseText);f.val(d),h.removeClass("loading Active Cancelled"),h.addClass("error validation_message")},timeout:u})}(_)}else v.hide(),k.hide(),j.hide(),x.hide(),N.hide(),A.hide(),D.hide(),F.hide(),B.hide(),C.val("").change(),Q.val("").change(),E.val("").change(),w.val("").change(),S.val("").change(),T.val("").change(),G.remove(),O.val("").change(),m.prop("disabled",!1),b.prop("disabled",!1),m.prop("checked",!1).change().keyup(),b.prop("checked",!1).change().keyup(),y.hide(),h.html(l),h.addClass("error validation_message"),h.removeClass("loading Active Cancelled")}))}(jQuery)}jQuery(document).ready((function(e){var i=gf_abnlookup_settings.abnlookup_fields,a=gf_abnlookup_settings.form_id;for(var s in i){var n=s;jQuery("#input_"+a+"_"+n).unbind("keydown").keydown((function(e){13!=e.which&&13!=e.keyCode||(e.preventDefault(),jQuery(this).trigger("change"))})),jQuery("#input_"+a+"_"+n).unbind("keyup").keyup((function(e){13!=e.which&&13!=e.keyCode||e.preventDefault()})),jQuery("#input_"+a+"_"+n).on("change keyup",(function(e){var a=i[s].validate,o=i[s].dateFormat;void 0!==a&&itsg_gf_abnlookup_function(n,a,o)}))}}));